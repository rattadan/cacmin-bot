# Litestream configuration for cacmin-bot database replication
# Install to: /etc/litestream.yml

# Prometheus metrics endpoint for monitoring
addr: ":9091"

# Logging configuration
logging:
  level: info
  type: json
  stderr: true

dbs:
  - path: /opt/cacmin-bot/data/bot.db

    # Monitor for changes every second
    monitor-interval: 1s

    # Single replica (v0.5.0+ syntax)
    replica:
      type: sftp
      # UPDATE THESE VALUES after LXC container is ready
      host: BACKUP_SERVER_IP:22
      user: litestream
      key-path: /etc/litestream/id_ed25519
      path: /cacmin-bot

      # Real-time sync
      sync-interval: 1s

      # Retain 72 hours of WAL files for point-in-time recovery
      retention: 72h
      retention-check-interval: 1h

      # Validate replica integrity daily
      validation-interval: 24h
